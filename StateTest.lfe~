(defmodule StateTest
  (export
   (state-process-test 0)))


(defun state-process-test ()
  (let ((pid (spawn 'State 'state (list 12))))
    (! pid (tuple 'get))
    (receive
      (n
       (io:format "~p~n" (list n)))
      (after 1000
	(io:format "nothing received ~n" ())))
    (! pid (tuple 'put (lambda (x) (+ 1 x))))
    (receive
      (n
       (io:format "~p~n" (list n)))
      (after 1000
	(io:format "nothing received ~n" ())))))
	